<!DOCTYPE html>
<html lang="fr">
<head>
    <title>Commande confirm√©e</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <style>
        body { 
            padding-top: 20px; 
            background-color: #f8f9fa;
        }
        .success-icon {
            font-size: 80px;
            color: #28a745;
            animation: scaleIn 0.5s ease-in-out;
        }
        @keyframes scaleIn {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }
        .success-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            padding: 40px;
            margin: 40px auto;
            max-width: 800px;
        }
        .order-details {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        .address-section {
            background: #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="success-card text-center">
            <!-- Ic√¥ne de succ√®s -->
            <div class="success-icon">‚úÖ</div>
            
            <h1 class="text-success mt-4 mb-3">Commande confirm√©e !</h1>
            
            <p class="lead text-muted mb-4">
                Merci pour votre commande. Votre num√©ro de commande est :
            </p>
            
            <h2 class="text-primary mb-4">{{ order.orderNumber }}</h2>
            
            <!-- D√©tails de la commande -->
            <div class="order-details text-start">
                <h4 class="text-dark mb-3">üìã D√©tails de la commande</h4>
                
                <div class="row mb-2">
                    <div class="col-6"><strong>Date :</strong></div>
                    <div class="col-6">{{ order.createdAt|date('d/m/Y √† H:i') }}</div>
                </div>
                
                <div class="row mb-2">
                    <div class="col-6"><strong>Total :</strong></div>
                    <div class="col-6"><strong class="text-success">{{ order.total|number_format(2) }}‚Ç¨</strong></div>
                </div>
                
                <div class="row mb-2">
                    <div class="col-6"><strong>Statut :</strong></div>
                    <div class="col-6">
                        <span class="badge bg-warning text-dark">{{ order.statusLabel }}</span>
                    </div>
                </div>

                <div class="row mb-2">
                    <div class="col-6"><strong>Client :</strong></div>
                    <div class="col-6">{{ order.customerName }}</div>
                </div>

                <div class="row mb-2">
                    <div class="col-6"><strong>Email :</strong></div>
                    <div class="col-6">{{ order.customerEmail }}</div>
                </div>

                <div class="row mb-2">
                    <div class="col-6"><strong>T√©l√©phone :</strong></div>
                    <div class="col-6">{{ order.customerPhone }}</div>
                </div>
            </div>

            <!-- Adresses -->
            {% if order.billingAddress %}
            <div class="address-section text-start">
                <h5 class="text-primary mb-3">üè† Adresse de facturation</h5>
                <div class="text-muted">
                    <strong>{{ order.billingAddress.name }}</strong><br>
                    {% if order.billingAddress.company %}{{ order.billingAddress.company }}<br>{% endif %}
                    {{ order.billingAddress.street }}<br>
                    {% if order.billingAddress.additionalInfo %}{{ order.billingAddress.additionalInfo }}<br>{% endif %}
                    {{ order.billingAddress.postalCode }} {{ order.billingAddress.city }}<br>
                    {{ order.billingAddress.country }}
                </div>
            </div>
            {% endif %}

            {% if order.shippingAddress and order.shippingAddress.id != order.billingAddress.id %}
            <div class="address-section text-start">
                <h5 class="text-primary mb-3">üöö Adresse de livraison</h5>
                <div class="text-muted">
                    <strong>{{ order.shippingAddress.name }}</strong><br>
                    {% if order.shippingAddress.company %}{{ order.shippingAddress.company }}<br>{% endif %}
                    {{ order.shippingAddress.street }}<br>
                    {% if order.shippingAddress.additionalInfo %}{{ order.shippingAddress.additionalInfo }}<br>{% endif %}
                    {{ order.shippingAddress.postalCode }} {{ order.shippingAddress.city }}<br>
                    {{ order.shippingAddress.country }}
                </div>
            </div>
            {% endif %}

            <!-- Articles command√©s -->
            {% if order.orderItems|length > 0 %}
            <div class="order-details text-start">
                <h5 class="text-primary mb-3">üõí Articles command√©s</h5>
                {% for item in order.orderItems %}
                <div class="row border-bottom py-2">
                    <div class="col-8">
                        <strong>{{ item.product.text ?: 'Produit personnalis√©' }}</strong><br>
                        <small class="text-muted">
                            {% if item.product.largeur and item.product.hauteur %}
                                Dimensions: {{ item.product.largeur }}cm √ó {{ item.product.hauteur }}cm
                            {% endif %}
                        </small>
                    </div>
                    <div class="col-2 text-center">{{ item.quantity }}</div>
                    <div class="col-2 text-end">{{ item.subtotal|number_format(2) }}‚Ç¨</div>
                </div>
                {% endfor %}
            </div>
            {% endif %}

            <!-- Email de confirmation -->
            {% if order.customerEmail %}
            <div class="alert alert-info mt-4">
                <strong>üìß Email de confirmation</strong><br>
                Un email de confirmation a √©t√© envoy√© √† : <strong>{{ order.customerEmail }}</strong>
            </div>
            {% endif %}

            <!-- Notes -->
            {% if order.notes %}
            <div class="order-details text-start">
                <h5 class="text-primary mb-3">üí¨ Notes</h5>
                <p class="text-muted">{{ order.notes }}</p>
            </div>
            {% endif %}

            <!-- Boutons d'action -->
            <div class="mt-4">
                {% if order.status == 'pending' %}
                    <a href="{{ path('payment_create_checkout', {orderId: order.id}) }}" class="btn btn-success btn-lg me-3">
                        üí≥ Payer maintenant
                    </a>
                {% endif %}
                
                {% if order.status == 'paid' or order.status == 'completed' %}
                    <a href="{{ path('invoice_download', {id: order.id}) }}" class="btn btn-info btn-lg me-3" target="_blank">
                        üìÑ T√©l√©charger la facture
                    </a>
                    <a href="{{ path('invoice_view', {id: order.id}) }}" class="btn btn-outline-info btn-lg me-3" target="_blank">
                        üëÅÔ∏è Voir la facture
                    </a>
                {% endif %}
                
                <a href="{{ path('app_home') }}" class="btn btn-primary btn-lg me-3">
                    üè† Retour √† l'accueil
                </a>
                <a href="{{ path('app_cart') }}" class="btn btn-outline-secondary btn-lg">
                    üõí Nouvelle commande
                </a>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>